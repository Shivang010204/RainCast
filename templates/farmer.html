<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farmer Portal | RainCast AI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background-color: var(--bg); color: var(--text-main); padding: 25px; }

        .stat-grid-3 { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
            gap: 20px; 
            margin-top: 20px; 
        }

        .farmer-badge {
            padding: 4px 12px;
            border-radius: 8px;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 800;
        }
        
        .badge-safe { background: rgba(16, 185, 129, 0.1); color: var(--accent-emerald); border: 1px solid var(--accent-emerald); }
        .badge-postpone { background: rgba(239, 68, 68, 0.1); color: var(--danger); border: 1px solid var(--danger); }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 12px 0;
            border-bottom: 1px solid var(--card-border);
        }
        .checklist-item:last-child { border-bottom: none; }
    </style>
</head>
<body>
    <div class="dashboard" style="max-width: 1100px; margin: auto;">
        <a href="/?city={{ city }}" class="staff-portal-link" style="display: inline-block; margin-bottom: 20px;">
            <i class="fa-solid fa-arrow-left"></i> Return to Command Center
        </a>

        <header style="margin-bottom: 30px;">
            <div class="sidebar-logo" style="margin-bottom: 5px;">AGRICULTURAL INTELLIGENCE</div>
            <p class="label-tiny">Expert Advisory for <span style="color: var(--text-main);">{{ city }}</span> | Live Soil & Climate Sync</p>
        </header>

        <div class="stat-grid-3">
            <div class="glass-card" style="text-align: center;">
                <p class="label-tiny">Chemical Application</p>
                <h4 style="margin: 10px 0;">Pesticide Spray Window</h4>
                <div style="margin: 15px 0;">
                    <span class="farmer-badge badge-safe">Optimal Window</span>
                </div>
                <p style="font-size: 0.8rem; color: var(--text-dim);">Wind drift risk is <12%. Conditions ideal for treatment.</p>
            </div>

            <div class="glass-card" style="text-align: center;">
                <p class="label-tiny">Crop Lifecycle</p>
                <h4 style="margin: 10px 0;">Sowing Suitability</h4>
                <div class="data-large emerald-glow" style="font-size: 3rem; margin: 10px 0;">88%</div>
                <p style="font-size: 0.8rem; color: var(--text-dim);">Thermic & Moisture profile matches sowing requirements.</p>
            </div>

            <div class="glass-card" style="text-align: center;">
                <p class="label-tiny">Resource Management</p>
                <h4 style="margin: 10px 0;">Irrigation Schedule</h4>
                <div style="margin: 15px 0;">
                    <span class="farmer-badge badge-postpone">Postpone Task</span>
                </div>
                <p style="font-size: 0.8rem; color: var(--text-dim);">Rain predicted in 24h cycle. Conservation advised.</p>
            </div>
        </div>

        <div class="glass-card" style="margin-top: 30px;">
            <p class="label-tiny" style="color: var(--primary);">Decision Support Checklist</p>
            <h3 style="margin: 10px 0 20px 0;"><i class="fa-solid fa-clipboard-check"></i> Field Action Items</h3>
            
            <div class="checklist-item">
                <i class="fa-solid fa-circle-check" style="color: var(--accent-emerald); margin-top: 4px;"></i>
                <div>
                    <b style="display: block; font-size: 0.9rem;">Drainage Maintenance</b>
                    <span style="font-size: 0.8rem; color: var(--text-dim);">Clear all plot channels to mitigate waterlogging risk from upcoming rain.</span>
                </div>
            </div>

            <div class="checklist-item">
                <i class="fa-solid fa-circle-check" style="color: var(--accent-emerald); margin-top: 4px;"></i>
                <div>
                    <b style="display: block; font-size: 0.9rem;">Structure Reinforcement</b>
                    <span style="font-size: 0.8rem; color: var(--text-dim);">Secure poly-house coverings; wind gusts predicted alongside precipitation.</span>
                </div>
            </div>

            <div class="checklist-item">
                <i class="fa-solid fa-circle-xmark" style="color: var(--danger); margin-top: 4px;"></i>
                <div>
                    <b style="display: block; font-size: 0.9rem;">Nitrogen Application</b>
                    <span style="font-size: 0.8rem; color: var(--text-dim);">Halt fertilizer dispersal. High runoff risk will cause nutrient leaching.</span>
                </div>
            </div>
        </div>
    </div>
</body>
</html>